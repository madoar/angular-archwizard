language: node_js

branches:
  only:
  - master
  - develop

jobs:
  include:
  - stage: Test
    os:
      - linux
      - osx
      - windows
    node_js:
      - "12"
      - "11"
      - "10"
    addons:
      chrome: stable
      firefox: latest
  - stage: Build
    os: linux
    node_js: "12"
    addons:
      chrome: stable    
    script: npm run build
  - stage: Coverage
    os: linux
    node_js: "12"
    addons:
      chrome: stable
    script: npm test
    after_success:
    - npm install -g codacy-coverage
    - codacy-coverage < coverage/lcov.info    
