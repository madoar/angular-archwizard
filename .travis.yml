sudo: required
dist: trusty

language: node_js

addons:
  chrome: stable

branches:
  only:
  - master
  - develop

jobs:
  include:
  - stage: Test
    node_js:
    - "10"
    - "9"
    - "8"
    script: npm test
  - stage: Coverage
    node_js: "10"
    script: npm test
    after_success:
    - npm install -g codacy-coverage
    - codacy-coverage < coverage/lcov.info
  - stage: Build
    node_js: "10"
    script: npm run build
